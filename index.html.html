<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feliz Cumple Estefany ‚ù§Ô∏è</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  color:white;
  text-align:center;
  overflow-x:hidden;
  background:radial-gradient(circle at bottom,#0d1b2a,#000);
  transition:background 2s;
}

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:-1;
}

h1{
  margin-top:40px;
  text-shadow:0 0 20px white;
}

.card{
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(12px);
  margin:30px auto;
  padding:25px;
  border-radius:20px;
  width:90%;
  max-width:650px;
  box-shadow:0 10px 30px rgba(0,0,0,0.6);
}

button{
  padding:10px 20px;
  border:none;
  border-radius:25px;
  background:#6c5ce7;
  color:white;
  cursor:pointer;
  margin:6px;
  transition:0.3s;
}
button:hover{
  background:#a29bfe;
  transform:scale(1.08);
}

/* ===== POPUP MUSICA ESQUINA ===== */
#musicPopup{
  position:fixed;
  bottom:20px;
  right:20px;
  width:220px;
  background:#111;
  border-radius:15px;
  padding:12px;
  box-shadow:0 0 20px #6c5ce7;
  display:none;
  z-index:999;
  font-size:13px;
}

#musicPopup img{
  width:100%;
  border-radius:10px;
}

#closeBtn{
  position:absolute;
  top:5px;
  right:8px;
  cursor:pointer;
}

#progressBar{
  width:100%;
  height:6px;
  background:#333;
  border-radius:4px;
  margin-top:8px;
  overflow:hidden;
}

#progress{
  height:100%;
  width:0%;
  background:#6c5ce7;
}

/* estrellas fugaces */
.shooting-star{
  position:fixed;
  width:2px;
  height:80px;
  background:linear-gradient(white,transparent);
  animation:shoot 1s linear forwards;
}
@keyframes shoot{
  from{transform:translate(0,0) rotate(45deg);}
  to{transform:translate(300px,300px) rotate(45deg); opacity:0;}
}
</style>
</head>
<body>

<canvas id="fireworks"></canvas>

<h1>üéâ Feliz Cumplea√±os Estefany ‚ù§Ô∏è</h1>

<div class="card">
<p>Mi amor es m√°s infinito que el universo üí´</p>
</div>

<div class="card">
<h2>üéµ Nuestra Canci√≥n</h2>
<button id="musicBtn">Reproducir üíñ</button>
</div>

<!-- Popup reducido -->
<div id="musicPopup">
<span id="closeBtn" onclick="closePopup()">‚úñ</span>
<img src="https://i.imgur.com/HFXl8KM.png">
<p>Die With A Smile</p>
<div id="progressBar"><div id="progress"></div></div>
<p id="time">0:00 / 4:12</p>
</div>

<div class="card">
<h2>‚öôÔ∏è Activar Animaciones</h2>
<button onclick="toggleGalaxy()">Galaxia Movimiento</button>
<button onclick="toggleStars()">Estrellas Fugaces</button>
<button onclick="togglePulse()">Pulso C√≥smico</button>
<button onclick="toggleFireworks()">Fuegos Artificiales</button>
<button onclick="toggleHearts()">Explosi√≥n Corazones</button>
</div>

<!-- YOUTUBE -->
<iframe id="ytplayer" width="0" height="0"
src="https://www.youtube.com/embed/kPa7bsKwL-c?enablejsapi=1"
frameborder="0" allow="autoplay"></iframe>

<script>

/* ===== VARIABLES ===== */
let galaxyOn=false;
let starsOn=false;
let pulseOn=false;
let fireworksOn=false;
let heartsOn=false;

/* ===== GALAXIA MOVIMIENTO ===== */
function toggleGalaxy(){
  galaxyOn=!galaxyOn;
  if(galaxyOn){
    document.body.style.animation="galaxyMove 10s infinite alternate";
  }else{
    document.body.style.animation="none";
  }
}
const style=document.createElement("style");
style.innerHTML=`
@keyframes galaxyMove{
  from{background-position:0 0;}
  to{background-position:100px 100px;}
}`;
document.head.appendChild(style);

/* ===== ESTRELLAS FUGACES ===== */
let starInterval;
function toggleStars(){
  starsOn=!starsOn;
  if(starsOn){
    starInterval=setInterval(()=>{
      const star=document.createElement("div");
      star.className="shooting-star";
      star.style.top=Math.random()*window.innerHeight+"px";
      star.style.left=Math.random()*window.innerWidth+"px";
      document.body.appendChild(star);
      setTimeout(()=>star.remove(),1000);
    },1500);
  }else clearInterval(starInterval);
}

/* ===== PULSO COSMICO ===== */
function togglePulse(){
  pulseOn=!pulseOn;
  if(pulseOn){
    document.body.style.animation="pulse 3s infinite";
  }else{
    document.body.style.animation="none";
  }
}
const pulseStyle=document.createElement("style");
pulseStyle.innerHTML=`
@keyframes pulse{
0%{filter:brightness(1);}
50%{filter:brightness(1.3);}
100%{filter:brightness(1);}
}`;
document.head.appendChild(pulseStyle);

/* ===== FUEGOS ARTIFICIALES ===== */
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
let particles=[];

function createFirework(){
  for(let i=0;i<50;i++){
    particles.push({
      x:canvas.width/2,
      y:canvas.height/2,
      angle:Math.random()*2*Math.PI,
      speed:Math.random()*5+2,
      life:100
    });
  }
}

function animateFireworks(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    p.x+=Math.cos(p.angle)*p.speed;
    p.y+=Math.sin(p.angle)*p.speed;
    p.life--;
    ctx.fillStyle="hsl("+Math.random()*360+",100%,50%)";
    ctx.fillRect(p.x,p.y,3,3);
  });
  particles=particles.filter(p=>p.life>0);
  if(fireworksOn) requestAnimationFrame(animateFireworks);
}

function toggleFireworks(){
  fireworksOn=!fireworksOn;
  if(fireworksOn){
    createFirework();
    animateFireworks();
  }
}

/* ===== EXPLOSION CORAZONES CLICK ===== */
function toggleHearts(){
  heartsOn=!heartsOn;
}
document.addEventListener("click",(e)=>{
  if(!heartsOn) return;
  for(let i=0;i<15;i++){
    const heart=document.createElement("div");
    heart.innerHTML="‚ù§Ô∏è";
    heart.style.position="fixed";
    heart.style.left=e.clientX+"px";
    heart.style.top=e.clientY+"px";
    heart.style.animation="shoot 1s linear forwards";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),1000);
  }
});

/* ===== MUSICA ===== */
let player, playing=false, progressSec=0;
const total=252;

var tag=document.createElement('script');
tag.src="https://www.youtube.com/iframe_api";
document.body.appendChild(tag);

function onYouTubeIframeAPIReady(){
  player=new YT.Player('ytplayer');
}

document.getElementById("musicBtn").addEventListener("click",()=>{
  if(!playing){
    player.playVideo();
    document.getElementById("musicPopup").style.display="block";
    playing=true;
    const interval=setInterval(()=>{
      if(progressSec<=total){
        const pct=(progressSec/total)*100;
        document.getElementById("progress").style.width=pct+"%";
        let m=Math.floor(progressSec/60);
        let s=progressSec%60;
        if(s<10)s="0"+s;
        document.getElementById("time").innerText=m+":"+s+" / 4:12";
        progressSec++;
      } else clearInterval(interval);
    },1000);
  }
});

function closePopup(){
  document.getElementById("musicPopup").style.display="none";
  player.pauseVideo();
  playing=false;
}
</script>

</body>
</html>
